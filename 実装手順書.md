## MoneyFlow 実装計画書

### 🎯 実装フェーズ計画

#### **Phase 1: 基盤・認証システム構築（Week 1-2）**

**🔧 技術基盤セットアップ**
- [✅] Next.js 15 + TypeScript プロジェクト初期化
- [✅] shadcn/ui + Tailwind CSS 設定
- [✅] ESLint + Prettier 設定
- [✅] 環境変数設定（`.env.local`）

**🏗️ アーキテクチャ構築**
- [✅] ディレクトリ構造作成（要件定義書準拠）
- [✅] 型定義ファイル整備（完了済み）
- [✅] 定数・設定ファイル作成（完了済み）
- [✅] デモデータファイル作成（完了済み）

**🔐 認証システム実装** (後で実装)
- [ ] アクセス判定ロジック（ブラウザ vs LINE）
- [ ] Supabase Auth設定
- [ ] 統合認証コンテキスト作成
- [ ] 認証ミドルウェア実装
- [ ] ログインページ（複数認証方式対応）

---

#### **Phase 2: コアUI・コンポーネント開発（Week 3-4）**

**🎨 UI基盤コンポーネント**
- [✅] レイアウトコンポーネント（モバイル/PC対応）
- [✅] ナビゲーション（Bottom Navigation / Sidebar）
- [✅] ローディング・エラー処理コンポーネント
- [✅] 汎用フォームコンポーネント群

**💰 支出管理UI**
- [✅] 支出登録フォーム（金額入力、カテゴリ選択等）
- [✅] 支出一覧画面（カード形式、仮想スクロール）
- [✅] フィルター・検索UI
- [✅] 編集・削除ダイアログ

**📊 ダッシュボードUI**
- [✅] 月次サマリーカード
- [✅] クイック登録UI
- [✅] 予算進捗表示
- [✅] 最近の取引リスト

**🚀 追加UI機能**
- [✅] フローティングアクションボタン（FAB）
- [✅] 支出・収入登録モーダル
- [✅] サイドバーアクティブ状態表示

---

#### **Phase 3: データ管理・ビジネスロジック実装（Week 5-6）**

**💾 データ管理レイヤー**
- [ ] LocalStorage管理クラス
- [ ] データ操作ユーティリティ
- [ ] 楽観的更新実装
- [ ] キャッシュ戦略実装

**🔄 状態管理**
- [ ] カテゴリ管理ロジック
- [ ] 支出・収入データ管理
- [ ] フィルター・ソート機能
- [ ] テンプレート機能

**📈 計算・分析ロジック**
- [✅] 月次サマリー計算
- [✅] カテゴリ別集計
- [✅] 予算進捗計算
- [✅] チャートデータ生成

---

#### **Phase 4: 分析・レポート機能（Week 7-8）**

**📊 チャート・グラフ実装**
- [ ] 月次支出推移（折れ線グラフ）
- [ ] カテゴリ別円グラフ
- [ ] 予算vs実績（棒グラフ）
- [ ] レスポンシブ対応

**📋 レポート機能**
- [ ] 月次レポート画面
- [ ] 年次レポート画面
- [ ] カスタム期間レポート
- [ ] PDF/CSV エクスポート

**⚠️ 予算管理・アラート**
- [ ] 予算設定UI
- [ ] アラート表示ロジック
- [ ] 通知機能（PWA対応）

---

#### **Phase 5: 収入管理・テンプレート機能（Week 9-10）**

**💸 収入管理**
- [✅] 収入登録フォーム
- [✅] 収入一覧・編集機能
- [ ] 定期収入設定

**📋 テンプレート機能**
- [ ] 定期支出テンプレート
- [ ] 自動生成・通知機能
- [ ] テンプレート管理画面

**🗂️ カテゴリ管理**
- [ ] カテゴリ作成・編集
- [ ] カテゴリ統合・削除
- [ ] ドラッグ&ドロップ並び替え

---

#### **Phase 6: 設定・ユーティリティ機能（Week 11-12）**

**⚙️ 設定画面**
- [ ] ユーザープロファイル設定
- [ ] アプリ設定（テーマ、言語等）
- [ ] 通知設定
- [ ] データエクスポート設定

**🗑️ データ管理機能**
- [ ] ゴミ箱機能
- [ ] データバックアップ・復元
- [ ] データインポート・エクスポート

**🔍 検索・フィルター強化**
- [ ] 全文検索実装
- [ ] 高度なフィルター機能
- [ ] 保存済みフィルター

---

#### **Phase 7: パフォーマンス最適化・PWA対応（Week 13-14）**

**⚡ パフォーマンス最適化**
- [ ] 仮想スクロール実装
- [ ] 画像最適化
- [ ] コード分割・遅延読み込み
- [ ] メモリリーク対策

**📱 PWA機能**
- [ ] Service Worker実装
- [ ] オフライン対応
- [ ] プッシュ通知
- [ ] アプリインストール促進

**🎨 UI/UXポリッシュ**
- [✅] アニメーション実装
- [✅] マイクロインタラクション
- [✅] アクセシビリティ改善
- [ ] 多言語対応準備

---

#### **Phase 8: テスト・デバッグ・デプロイ準備（Week 15-16）**

**🧪 テスト実装**
- [ ] 単体テスト作成
- [ ] 統合テスト作成
- [ ] E2Eテスト作成
- [ ] パフォーマンステスト

**🐛 品質保証**
- [ ] エラーハンドリング強化
- [ ] ログ出力実装
- [ ] デバッグ機能実装
- [ ] セキュリティ監査

**🚀 デプロイ準備**
- [ ] ビルド最適化
- [ ] 環境別設定
- [ ] CI/CDパイプライン構築
- [ ] 本番環境セットアップ

---

### 🏗️ ディレクトリ構造詳細

```
home-money/
├── app/                        # Next.js App Router
│   ├── (auth)/                 # 認証関連ページ
│   │   ├── login/             
│   │   └── callback/          
│   ├── dashboard/              # ダッシュボード
│   ├── expenses/               # 支出管理
│   │   ├── new/               # 支出登録
│   │   └── [id]/              # 支出詳細・編集
│   ├── income/                 # 収入管理
│   ├── categories/             # カテゴリ管理
│   ├── reports/                # レポート・分析
│   ├── settings/               # 設定
│   ├── layout.tsx              # ルートレイアウト
│   ├── page.tsx                # ホーム（リダイレクト）
│   └── middleware.ts           # 認証ミドルウェア

├── components/                 # 汎用UIコンポーネント
│   ├── ui/                     # shadcn/ui コンポーネント
│   ├── auth/                   # 認証関連
│   ├── layout/                 # レイアウト関連
│   ├── forms/                  # フォーム関連
│   ├── charts/                 # チャート関連
│   └── common/                 # 共通UI

├── lib/                        # ユーティリティ・サービス
│   ├── utils.ts                # 汎用ユーティリティ
│   ├── validations.ts          # バリデーション
│   ├── storage.ts              # ストレージ管理
│   ├── auth/                   # 認証サービス
│   ├── supabase/               # Supabase関連
│   └── calculations.ts         # 計算ロジック

├── hooks/                      # カスタムフック
│   ├── useAuth.ts              # 認証状態管理
│   ├── useLocalStorage.ts      # ローカルストレージ
│   ├── useExpenses.ts          # 支出データ管理
│   ├── useIncomes.ts           # 収入データ管理
│   └── useCategories.ts        # カテゴリ管理

├── types/                      # 型定義（完了済み）
├── data/                       # デモデータ（完了済み）
├── constants/                  # 定数（完了済み）
├── config/                     # 設定（完了済み）
├── services/                   # 外部API・ビジネスロジック
└── demo/                       # 手動テストページ
```

### 🔧 開発優先順位

1. **最優先**: 基本的な支出登録・一覧表示機能
2. **高優先**: ダッシュボード・月次サマリー表示
3. **中優先**: カテゴリ管理・フィルター・検索
4. **低優先**: 分析・レポート・エクスポート機能
